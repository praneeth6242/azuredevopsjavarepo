parameters: 
  - name: openjdkversion
    displayName: java version
    type: string
    default: '1.17'  
  - name: goals
    displayName: build and deploy
    type: string 
    default: 'package'
    values:
      - package
      - install 
      - clean  
      - compile
      - deploy   
  - name: package
    displayName: package
    type: string
    default: 'java-1.17.0-openjdk-amd64'   
  - name: task
    displayName: task in steps 
    type: string 
    default: 'Maven@3'
steps:  
  - task: ${{parameters.task}}
    inputs:
      mavenPomFile: 'pom.xml'
      goals: "${{parameters.goals}}"
      publishJUnitResults: true 
      testResultsFiles: '**/surefire-reports/TEST-*.xml' 
      javaHomeOption: Path
      jdkDirectory: /home/ubuntu/myagent/_work/1/s//"${{parameters.package}}"
      jdkVersionOption: "${{parameters.openjdkversion}}"  



       - job: build  
    displayName: package
    steps:  
      - task: Maven@3
        inputs:
         mavenPomFile: 'pom.xml'
         goals: 'package'
         publishJUnitResults: true 
         testResultsFiles: '**/surefire-reports/TEST-*.xml' 
         javaHomeOption: Path
         jdkDirectory: /usr/lib/jvm/java-1.17.0-openjdk-amd64 /home/ubuntu/myagent/_work/1/s/"java-1.17.0-openjdk-amd64"
         jdkVersionOption: '1.17' 