parameters: 
  - name: openjdkversion
    displayName: java version
    type: string
    default: '1.17'  
  - name: goals
    displayName: build and deploy
    type: string 
    default: 'package'
    values:
      - package
      - install 
      - clean  
      - compile
      - deploy   
  - name: package
    displayName: package
    type: string
    default: 'java-1.17.0-openjdk-amd64'                                                     
  - name: task
    displayName: task in steps 
    type: string 
    default: 'Maven@3' 
  - name: pomfile
    displayName: pomfile
    type: string 
    default: 'pom.xml'
steps:  
  - task: "${{parameters.task}}"
    inputs:
      mavenPomFile: "${{parameters.pomfile}}"
      goals: "${{parameters.goals}}"
      publishJUnitResults: true 
      testResultsFiles: '**/surefire-reports/TEST-*.xml' 
      javaHomeOption: Path
      jdkDirectory: "/usr/lib/jvm/${{parameters.package}}"
      jdkVersionOption: "${{parameters.openjdkversion}}" 
      mavenAuthenticateFeed: true
  